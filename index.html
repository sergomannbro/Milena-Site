<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meine Ordnung – To-Do</title>

  <!-- Buch-ähnliche Schrift (fallback auf Serif, falls offline) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #ffd1dc;        /* babyrosa */
      --card: rgba(255,255,255,.72);
      --card2: rgba(255,255,255,.58);
      --ink: #3a2a2a;
      --muted: rgba(58,42,42,.72);
      --stroke: rgba(58,42,42,.14);
      --shadow: 0 16px 40px rgba(58,42,42,.18);
      --shadow2: 0 10px 24px rgba(58,42,42,.14);
      --radius: 22px;
      --radius2: 14px;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background: var(--bg);
      color: var(--ink);
      font-family: "Merriweather", Georgia, "Times New Roman", Times, serif;
      line-height: 1.45;
      overflow-x:hidden;
    }

    /* Hintergrund-Animation: Blasen */
    .float-layer{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow:hidden;
    }
    .float{
      position:absolute;
      width: 160px;
      height: 160px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.65), rgba(255,255,255,0));
      opacity:.75;
      animation: drift linear infinite;
      mix-blend-mode: soft-light;
    }
    .float.small{ width:110px; height:110px; opacity:.65; }
    .float.tiny{ width:80px; height:80px; opacity:.55; }
    @keyframes drift{
      0%   { transform: translate(-15vw, 10vh) scale(1); }
      100% { transform: translate(115vw, -10vh) scale(1.15); }
    }

    /* Layout */
    .app{
      position: relative;
      z-index: 1;
      max-width: 980px;
      margin: 0 auto;
      padding: 22px 16px 36px;
    }

    header{
      display:flex;
      gap: 16px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      flex-direction: column;
      gap: 6px;
      min-width: 260px;
    }
    .brand h1{
      font-size: clamp(22px, 3.2vw, 34px);
      letter-spacing: .2px;
      margin:0;
    }
    .brand p{
      margin:0;
      color: var(--muted);
      max-width: 60ch;
    }

    .pill{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: 999px;
      padding: 10px 12px;
      box-shadow: var(--shadow2);
      display:flex;
      align-items:center;
      gap: 10px;
      backdrop-filter: blur(8px);
      min-width: 210px;
      justify-content: center;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(10px);
    }

    .card h2{
      margin: 0 0 12px;
      font-size: 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .sub{
      margin: -6px 0 12px;
      color: var(--muted);
      font-size: 13px;
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }

    input, button{
      font-family: inherit;
      color: var(--ink);
      border-radius: 12px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.78);
      padding: 10px 11px;
      outline: none;
    }
    input:focus{
      box-shadow: 0 0 0 4px rgba(58,42,42,.08);
    }

    button{
      cursor:pointer;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: 0 10px 18px rgba(58,42,42,.12);
      background: rgba(255,255,255,.85);
      font-weight: 700;
    }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0); box-shadow: 0 6px 12px rgba(58,42,42,.10); }

    .btn-ghost{
      background: rgba(255,255,255,.55);
      box-shadow: none;
      font-weight: 700;
    }

    .divider{
      height: 1px;
      background: rgba(58,42,42,.12);
      margin: 12px 0;
    }

    /* Liste */
    .list{
      display:flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }
    .item{
      background: var(--card2);
      border: 1px solid var(--stroke);
      border-radius: var(--radius2);
      padding: 10px 12px;
      display:grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items:center;
    }

    .title{
      font-weight:700;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .done .title{
      text-decoration: line-through;
      opacity: .85;
    }
    .hint{
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .checkbox{
      width: 20px;
      height: 20px;
      accent-color: rgba(58,42,42,.70);
      cursor:pointer;
    }

    footer{
      margin-top: 16px;
      color: var(--muted);
      font-size: 12px;
      text-align:center;
    }

    /* kleiner Puls im Titel */
    .spark{
      display:inline-block;
      margin-left: 8px;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.65);
      animation: pulse 1.8s ease-in-out infinite;
      box-shadow: 0 0 0 0 rgba(255,255,255,.4);
    }
    @keyframes pulse{
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,.35); }
      50%{ transform: scale(1.35); box-shadow: 0 0 0 10px rgba(255,255,255,0); }
      100%{ transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,0); }
    }
  </style>
</head>

<body>
  <!-- Blasen-Hintergrund -->
  <div class="float-layer" aria-hidden="true">
    <div class="float" style="top:12vh; left:-20vw; animation-duration: 38s; animation-delay: -8s;"></div>
    <div class="float small" style="top:55vh; left:-25vw; animation-duration: 44s; animation-delay: -18s;"></div>
    <div class="float tiny" style="top:78vh; left:-18vw; animation-duration: 34s; animation-delay: -2s;"></div>
    <div class="float small" style="top:28vh; left:-30vw; animation-duration: 52s; animation-delay: -26s;"></div>
    <div class="float tiny" style="top:6vh; left:-28vw; animation-duration: 48s; animation-delay: -30s;"></div>
  </div>

  <main class="app">
    <header>
      <div class="brand">
        <h1>Meine Ordnung <span class="spark" aria-hidden="true"></span></h1>
        <p>Eine einfache To-Do-Liste: eintragen, abhaken, löschen. Alles bleibt im Browser gespeichert.</p>
      </div>

      <div class="pill" id="counterPill">
        <strong id="counterText">0 offen • 0 erledigt</strong>
      </div>
    </header>

    <section class="card">
      <h2>To-Do-Liste <button class="btn-ghost" id="clearAllBtn" title="Alles löschen">Reset</button></h2>
      <p class="sub">Tipp: Enter drücken, um schnell hinzuzufügen.</p>

      <div class="row">
        <input id="todoInput" type="text" placeholder="Neue Aufgabe …" style="flex:1; min-width: 240px;" />
        <button id="addBtn">Hinzufügen</button>
      </div>

      <div class="divider"></div>
      <div class="list" id="todoList"></div>
    </section>

    <footer>
      Speichert automatisch im Browser (LocalStorage). Wenn du die Seite auf einem anderen Gerät öffnest, ist die Liste dort leer.
    </footer>
  </main>

  <script>
    const STORAGE_KEY = "babyrosa_simple_todo_v1";

    const state = loadState();

    const todoInput = document.getElementById("todoInput");
    const addBtn = document.getElementById("addBtn");
    const todoList = document.getElementById("todoList");
    const clearAllBtn = document.getElementById("clearAllBtn");
    const counterText = document.getElementById("counterText");

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return { todos: [] };
        const parsed = JSON.parse(raw);
        return { todos: Array.isArray(parsed.todos) ? parsed.todos : [] };
      }catch{
        return { todos: [] };
      }
    }

    function saveState(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    function uid(){
      return Math.random().toString(16).slice(2) + Date.now().toString(16);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function addTodo(){
      const title = (todoInput.value || "").trim();
      if(!title) return;

      state.todos.unshift({
        id: uid(),
        title,
        done: false,
        createdAt: new Date().toISOString()
      });

      todoInput.value = "";
      saveState();
      render();
    }

    function toggleTodo(id){
      const t = state.todos.find(x => x.id === id);
      if(!t) return;
      t.done = !t.done;
      saveState();
      render();
    }

    function deleteTodo(id){
      state.todos = state.todos.filter(x => x.id !== id);
      saveState();
      render();
    }

    function clearAll(){
      if(!confirm("Wirklich ALLES löschen?")) return;
      state.todos = [];
      saveState();
      render();
    }

    function render(){
      todoList.innerHTML = "";

      if(state.todos.length === 0){
        todoList.innerHTML = `<div class="sub">Noch keine Aufgaben. Trag eine ein ✨</div>`;
        updateCounter();
        return;
      }

      state.todos.forEach(t => {
        const item = document.createElement("div");
        item.className = "item" + (t.done ? " done" : "");

        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.className = "checkbox";
        cb.checked = !!t.done;
        cb.title = "Abhaken";
        cb.addEventListener("change", () => toggleTodo(t.id));

        const meta = document.createElement("div");
        meta.innerHTML = `
          <div class="title">${escapeHtml(t.title)}</div>
          <div class="hint">${t.done ? "Erledigt" : "Offen"}</div>
        `;

        const actions = document.createElement("div");
        const del = document.createElement("button");
        del.className = "btn-ghost";
        del.textContent = "Löschen";
        del.addEventListener("click", () => deleteTodo(t.id));
        actions.appendChild(del);

        item.appendChild(cb);
        item.appendChild(meta);
        item.appendChild(actions);

        todoList.appendChild(item);
      });

      updateCounter();
    }

    function updateCounter(){
      const done = state.todos.filter(t => t.done).length;
      const open = state.todos.length - done;
      counterText.textContent = `${open} offen • ${done} erledigt`;
    }

    addBtn.addEventListener("click", addTodo);
    todoInput.addEventListener("keydown", (e) => {
      if(e.key === "Enter") addTodo();
    });

    clearAllBtn.addEventListener("click", clearAll);

    render();
  </script>
</body>
</html>
